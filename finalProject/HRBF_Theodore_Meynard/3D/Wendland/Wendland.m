clear all
close all
clc


syms x1 x2 x3 r

t = sqrt(x1^2 + x2^2 + x3^2)

phi = (1 - t/r)^4 * (4 * t/r + 1)

D = gradient(phi,[x1 x2 x3]);
D1 = D(1)
D2 = D(2)
D3 = D(3)

H = hessian(phi,[x1 x2 x3]);
H11 = H(1,1)
H22 = H(2,2)
H33 = H(3,3)
H12 = H(1,2)
H13 = H(1,3)
H23 = H(2,3)

% D1 =
%  
% (4.*x1.*(t - 1).^4)./t + (4.*x1.*(4.*t + 1).*(t - 1).^3)./t
%  
%  
% D2 =
%  
% (4.*x2.*(t - 1).^4)./t + (4.*x2.*(4.*t + 1).*(t - 1).^3)./t
%  
%  
% D3 =
%  
% (4.*x3.*(t - 1).^4)./t + (4.*x3.*(4.*t + 1).*(t - 1).^3)./t
%  
%  
% H11 =
%  
% (4.*(t - 1).^4)./t + (32.*x1.^2.*(t - 1).^3)./(t.^2) - (4.*x1.^2.*(t - 1).^4)./(t.^2).^(3./2) + (4.*(4.*t + 1).*(t - 1).^3)./t + (12.*x1.^2.*(4.*t + 1).*(t - 1).^2)./(t.^2) - (4.*x1.^2.*(4.*t + 1).*(t - 1).^3)./(t.^2).^(3./2)
%  
%  
% H22 =
%  
% (4.*(t - 1).^4)./t + (32.*x2.^2.*(t - 1).^3)./(t.^2) - (4.*x2.^2.*(t - 1).^4)./(t.^2).^(3./2) + (4.*(4.*t + 1).*(t - 1).^3)./t + (12.*x2.^2.*(4.*t + 1).*(t - 1).^2)./(t.^2) - (4.*x2.^2.*(4.*t + 1).*(t - 1).^3)./(t.^2).^(3./2)
%  
%  
% H33 =
%  
% (4.*(t - 1).^4)./t + (32.*x3.^2.*(t - 1).^3)./(t.^2) - (4.*x3.^2.*(t - 1).^4)./(t.^2).^(3./2) + (4.*(4.*t + 1).*(t - 1).^3)./t + (12.*x3.^2.*(4.*t + 1).*(t - 1).^2)./(t.^2) - (4.*x3.^2.*(4.*t + 1).*(t - 1).^3)./(t.^2).^(3./2)
%  
%  
% H12 =
%  
% (32.*x1.*x2.*(t - 1).^3)./(t.^2) - (4.*x1.*x2.*(t - 1).^4)./(t.^2).^(3./2) + (12.*x1.*x2.*(4.*t + 1).*(t - 1).^2)./(t.^2) - (4.*x1.*x2.*(4.*t + 1).*(t - 1).^3)./(t.^2).^(3./2)
%  
%  
% H13 =
%  
% (32.*x1.*x3.*(t - 1).^3)./(t.^2) - (4.*x1.*x3.*(t - 1).^4)./(t.^2).^(3./2) + (12.*x1.*x3.*(4.*t + 1).*(t - 1).^2)./(t.^2) - (4.*x1.*x3.*(4.*t + 1).*(t - 1).^3)./(t.^2).^(3./2)
%  
%  
% H23 =
%  
% (32.*x2.*x3.*(t - 1).^3)./(t.^2) - (4.*x2.*x3.*(t - 1).^4)./(t.^2).^(3./2) + (12.*x2.*x3.*(4.*t + 1).*(t - 1).^2)./(t.^2) - (4.*x2.*x3.*(4.*t + 1).*(t - 1).^3)./(t.^2).^(3./2)
%  
